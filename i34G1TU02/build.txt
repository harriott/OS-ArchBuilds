vim: ft=build:

Packard Bell iMedia S i34G1TU02

# before Dropbox, prepare K8GBDTIG3
cp -f $ITstack/unix_like-GNULinux/iwctl-connect.sh /run/media/jo/K8GBDTIG3
rsync -irtv --delete --modify-window=1 $onGH/ArchBuilds/ /run/media/jo/K8GBDTIG3/ArchBuilds
rsync -irtv --delete --modify-window=1 $core/ /run/media/jo/K8GBDTIG3/core
# build
## mature Arch install from M587637 on GPT SDSSDA240G
booted to  archlinux-2021.11.01-x86_64.iso  on  K8GBDT100
lsblk  indicated  mount /dev/sda2 /mnt
### fstab
cd /mnt/etc
  cat fstab  shows it's gpt
  mv fstab fstab-la
mount /dev/sda3 /mnt/home
genfstab -U /mnt >> /mnt/etc/fstab  got the same UUIDs
halt -p
### won't boot SDSSDA240G
ERROR: No boot disk has been detected or the disk has failed.
BIOS > Boot Options > Hard Disk Drive Priority ain't showing a drive - because it's GPT
### move to MBR BX200
(in  sbMb  Arch, prep'd with  parted
  then  sudo rsync -aAivX --delete ...  to copy over the partitions from SDSSDA240G)
booted to  archlinux-2021.11.01-x86_64.iso  on  K8GBDT100
lsblk  indicated  mount /dev/sda1 /mnt  mount /dev/sda2 /mnt/home
mkswap /dev/sda3
swapon /dev/sda3
swapon -s
genfstab -U /mnt > /mnt/etc/fstab
arch-chroot /mnt
grub-install --target=i386-pc /dev/sda
grub-mkconfig -o /boot/grub/grub.cfg
halt -p
### booted to mature Arch
"Timed out... enp0s25" so  systemctl disable dhcpcd@enp0s25
firewall-cmd --zone=trusted --remove-interface=enp0s25 --permanent
firewall-cmd --reload
## Updates
bash 36-symlinks-sshd.sh
:: Replace python-sgmllib with extra/python-sgmllib3k? [Y/n]
2GiB...
## fixed updatedb.conf
## got rsnapshot working
## Zen kernel
bash 28-Zen.sh
  Warning: os-prober will not be executed to detect other bootable partitions.
## ethernet
altname somehow:
  2: eno1: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc fq_codel state DOWN mode DEFAULT group default qlen 1000
      link/ether ec:a8:6b:8b:a4:28 brd ff:ff:ff:ff:ff:ff
      altname enp0s25
## reboot is slow
## grub.pacnew
sudo nvim -O /etc/default/grub /etc/default/grub.pacnew
sudo rm /etc/default/grub.pacnew
## Updates
:: Replace hwids with core/hwdata? [Y/n]
## trailing Firefox error
after calling it from  xdg-open
  !!! [Parent][RunMessage] Error: Channel closing: too late to send/recv, messages will be lost
## Updates
:: Import PGP key C132293954BBE4AD, "Sergej Pupykin <spupykin@archlinux.org>"? [Y/n]
## Updates
:: Replace quazip with extra/quazip-qt5? [Y/n]
## sudoers.pacnew
sudo nvim -O /etc/sudoers /etc/sudoers.pacnew
sudo visudo -c -f /etc/sudoers
cp /etc/sudoers $ARCHBUILDS/etc/sudoers/sudoers
sudo chown jo:jo $ARCHBUILDS/etc/sudoers/sudoers
sudo rm /etc/sudoers.pacnew
## LanguageTool 5.6
## update GnuPG key 13F327EF
gpg --edit-key 13F327EF > 1 > expire > 2y > trust
gpg -ao sprbMbArch-m2o-public.asc --export jharr
gpg -ao sprbMbArch-m2o-private.asc --export-secret-keys jharr
gpg --send-keys 13F327EF
  gpg: sending key 842A4DEE13F327EF to hkps://keyserver.ubuntu.com
## Updates
:: libstdc++5-bin and libstdc++5 are in conflict. Remove libstdc++5? [y/N]
## Updates
:: Starting full system upgrade...
:: Replace espeak-ng-espeak with community/espeak-ng? [Y/n]
## Updates
:: libvterm01 and libvterm are in conflict. Remove libvterm? [y/N] y
## rsnapshot never seems to complete
## Updates
pactree -r python2-wheel
  python2-wheel
  └─python2-importlib_resources
    └─python2-virtualenv
### sudoers.pacnew
sudo nvim -O /etc/sudoers /etc/sudoers.pacnew -c 'windo difft'  diff'd over changes then  :wq!
sudo visudo -c -f /etc/sudoers
sudo nvim -O /etc/sudoers $ARCHBUILDS/etc/sudoers/sudoers -c 'windo difft'
sudo chown jo:jo $ARCHBUILDS/etc/sudoers/sudoers
sudo rm /etc/sudoers.pacnew
## moved snapshot_root to WD1600AAJS
### temporarily disabled rsnapshot timers
$ARCHBUILDS/build-scripts/24-as_root-rsnapshot_automated.sh
## Updates
error: failed retrieving file 'python-more-itertools-8.13.0-1-any.pkg.tar.zst.sig'
  from archlinux.thaller.ws
sudo bash 02-when_chroot-reflector.sh
Packages (1) google-chrome-102.0.5005.115-1
...
==> NOTE: Custom flags should be put directly in: ~/.config/chrome-flags.conf
==> NOTE: The launcher is called: 'google-chrome-stable'
## prepare SDSSDA240G (via Decrescent) as new bootable disk
prep'd partitions on sbMb, mistakenly adding an EFI boot
### Updates
#### sudoers.pacnew
sudo nvim -O /etc/sudoers /etc/sudoers.pacnew -c 'windo difft'  diff'd over changes then  :wq!
sudo visudo -c -f /etc/sudoers
sudo nvim -O /etc/sudoers $ARCHBUILDS/etc/sudoers/sudoers -c 'windo difft'
sudo rm /etc/sudoers.pacnew
### prepare root
su > root pw  for
  rsync -aAixvX --delete --exclude=/home/* / /run/media/jo/e840a3bc-a0d8-4b56-8394-dcd1de8123fc
### prepare home
su > root pw  for
  rsync -aAixvX --delete /home/ /run/media/jo/bd7a46cc-2b12-4e37-8404-f1cc8a731fa3
### prepare SDSSDA240G
su > root pw  for
  rsync -aAixvX --delete /mnt/BX200/ /run/media/jo/SDSSDA240G
## prepare to switch from BX200 to SDSSDA240G - unneeded
temporarily removed DVD writer and switched BX200 to that SATA - booted as normal
## Updates
NetworkManager WiFi was stuck in a VPN mode and couldn't see any wireless networks
  workaround was to tether Sony Xperia XA2
### abandon Python 2
sudo pacman -Rs $(pacman -Qq | grep python2)
## Updates
  ... Warn about old perl modules
  WARNING: '/usr/lib/perl5/5.34' contains data from at least 2 packages which will NOT be used by the installed perl interpreter.
   -> Run the following command to get a list of affected packages: pacman -Qqo '/usr/lib/perl5/5.34'
pacman -Qqo '/usr/lib/perl5/5.34'
  perl-clone-pp
  perl-data-printer
so re-installed them
## /var/log/rsnapshot gets refreshed
thus losing old records...
## Updates
==> Verifying source file signatures with gpg...
    mimeo-2022.7.tar.xz ... FAILED (unknown public key 12C6F735F7A9A519)
==> ERROR: One or more PGP signatures could not be verified!
gpg --delete-key 8F173680
gpg --recv-keys 12C6F735F7A9A519
  gpg: key 12C6F735F7A9A519: public key "Xyne. (Replaces EC3CBE7F607D11E663149E811D1F0DC78F173680.) <xyne@archlinux.org>" imported
  gpg: Total number processed: 1
  gpg:               imported: 1
## waiting
FuseISO
mediawiki.xml
# fcron
fcrontab -l
  @ 1 bash ~/Arch/locks.sh
  @ 10 bash ~/Arch/bash_history.sh
  @ 20 jump clean
  @ 1 d bash ~/Arch/log_rsnapshot.sh
## temperatures
ln -sf $MACHINE/jo/f1t2t3/log.sh ~/Arch/f1t2t3/log.sh
ln -sf $MACHINE/jo/f1t2t3/f1t2t3.sh ~/Arch/f1t2t3/f1t2t3.sh
# locale.gen.pacnew
sudo nvim -O /etc/locale.gen /etc/locale.gen.pacnew -c 'windo difft'
sudo rm /etc/locale.gen.pacnew
# physical configuration
Fujitsu E19W5 1440x900
TL-WN725N
## BIOS Setup Utility
Boot Options
  1st Boot Device: Hard Disk
  2nd Boot Device: CD&DVD HL-DT-ST DVDRAM GH70N
  3rd Boot Device: Removable Device
  4th Boot Device: EFI Device
  5th Boot Device: LAN
Boot Options
  1st Boot Device: EFI Device
  2nd Boot Device: Hard Disk
  3rd Boot Device: CD&DVD HL-DT-ST DVDRAM GH70N
  4th Boot Device: Removable Device
  5th Boot Device: LAN
## cbh
Logitech M187 Wireless Mini Mouse
Perixx PERIBOARD-407W keyboard
## drives
HL Data Storage GH70N DVD rewriter
WD1600AAJS  in USB as target for  rsnapshot
### disks
BX200  in  LogiLink 2.5" HDD Mounting Bracket  in space under DVD drive
WD1600AAJS  in a USB slot as  snapshot_root
