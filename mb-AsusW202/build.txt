vim: ft=build:

Asus VivoBook W202  $OSAB/AsusW202/build.txt
X randomly restarting
# build
## ARCH_202207 to chroot
K16GBDTG2  plugged in for reboot > F2 at POST > Boot Priority >
  UEFI: KingstonDataTraveler G2 1.00, Partition 1 > F10
    Secure Boot Violation > Invalid signature detected. Check secure Boot Policy in Setup
  reboot > F2 at POST > F7 > Secure Boot > Secure Boot Control > Disabled
### prepare the bootable disk
lsblk shows
  mmcblk0 58.2G divided into 4
  mmcblk0boot0 4M
  mmcblk0boot1 4M
gdisk /dev/mmcblk0 > x (extra functionality) > z (Zap) > y > y
lsblk shows
  mmcblk0 58.2G
  mmcblk0boot0 4M
  mmcblk0boot1 4M
lsblk -f
### check booted to UEFI mode
ls /sys/firmware/efi/efivars  returns a load of files
journalctl -b -g 'EFI v'  reports "EFI v2.31 by American Megatrends"
### create UEFI & root partitions
gdisk /dev/mmcblk0 >
  p
  o (create a new empty GUID partition table (GPT) > y
  p
  n > Partition number (defaults to 1) > First sector (defaults to 2048) > Last sector > +550m >
    ef00 (EFI system partition)
  n > Partition number (defaults to 2) > First sector (defaults to 1128448) > Last sector > +4g >
    8200 (Linux swap)
  n > Partition number (defaults to 3) > First sector (defaults to 9517056) > Enter > Last sector >
    (defaults to 122140671) > 8304 Linux x86-64 root (/)
  w > y
gdisk /dev/mmcblk0 -l
### wireless check
lspci -k  reports  Intel Corporation Dual Band Wireless-AC 8265
iw dev wlan0 scan | grep OPP  found  Jo-OPPO-A76
### shutdown
halt -p
rebooted to  ARCH_202207
### K8GBDTIG3 load with $core
rsync -irtv --exclude="*tmux/plugins/tmux-*" --delete --modify-window=1 $core/ /run/media/jo/K8GBDTIG3/core
### K8GBDTIG3 loaded with $core - fail
plugged into right USB socket
mkdir /bs  then  blkid  indicated  mount /dev/sdc1 /bs
cd /bs/core/IT_stack/onGitHub/ArchBuilds/Bash  for  source export-storage
bash $ulL/connectSSID/iwctl.sh  got me online
bash $OSAB/bs-01-fromISO-efi-to_chroot.sh
  chroot: failed to run command '/bin/bash': No such file or directory
  /mnt/bin  not there...
rm -r /mnt  (didn't remove  /mnt/efi)
reboot
### K8GBDTIG3 loaded with $core - fail
plugged into right USB socket
mkdir /bs  then  blkid  indicated  mount /dev/sdc1 /bs
/bs/core/IT_stack/onGitHub/ArchBuilds/Bash  for  source export-storage
$ulL  for  bash connectSSID/iwctl.sh  got me online
$bSc  for  bash 01-as_root-efi-to_chroot.sh
  error: libcap: signature from "David Runge <dvzrv@archlinux.org>" is marginal trust
  /usr  didn't get installed...
rm -r /mnt  (didn't remove  /mnt/efi)
### K8GBDTIG3 loaded with $core
plugged into right USB socket
mkdir /bs  then  blkid  indicated  mount /dev/sdc1 /bs
/bs/core/IT_stack/onGitHub/ArchBuilds/Bash  for  source export-storage
$ulL  for  bash connectSSID/iwctl.sh  got me online
$bSc  for  bash 01-as_root-efi-to_chroot.sh
### shutdown
ctrl-d  for  halt -p
### K8GBDTIG3 loaded with $core
plugged into right USB socket
mkdir /bs  then  blkid  indicated  mount /dev/sdc1 /bs
/bs/core/IT_stack/onGitHub/ArchBuilds/Bash  for  source export-storage
$ulL  for  bash connectSSID/iwctl.sh  got me online
$bSc  for  bash 01-as_root-efi-to_chroot.sh
### as chroot
mkdir /bs  then  blkid  indicated  mount /dev/sdc1 /bs
(maybe not needed) cd /bs/core/IT_stack/onGitHub/ArchBuilds/Bash  for  . export-storage
#### build-scripts
$bSc
bash 02-when_chroot-reflector.sh
bash 03-as_root.sh
. 04-cloneArchBuilds.sh
pushed harriott/ArchBuilds  for  cd /  for  . ArchBuilds/build-scripts/04-cloneArchBuilds.sh
. ../Bash/export-storage
for after reboot,  bash 05-root_symlinks.sh
bash 06-when_chroot-to_bootloader.sh
ctrl-d  for  halt -p
## root
BIOS > Boot Priority > Windows Boot Manager  is still there...
to fix  /root/.export-machine  symlink,  bash 05-root_symlinks.sh
bash ~/iwctl.sh  got me online
bash 09-as_root-to_jo.sh
to fix  /home/jo/.bashrc-generic  symlink,  bash 05-root_symlinks.sh
bash 09-as_root-to_jo.sh
bash 10-as_root-RootkitHunt.sh
## jo
### move to NetworkManager
su rm /root/iwctl.sh
su rm -r /Archbuilds
bash ~/iwctl.sh  got me online
. ~/Archbuilds/Bash/export-storage
bash $OSAB/bs-symlinks/jo-0.sh
#### iwd disable & stop
sudo bash $OSAB/bs-07-iwd.sh
#### NetworkManager enable & start
bash $OSAB/bs-13-NetworkManager.sh
reboot  for  nmcli device
bash ~/NetworkManager.sh
### Firewalld
bash $OSAB/bs-02-as_root-reflector.sh
bash $OSAB/bs-15-as_root-when_jo-toFirewall.sh
scs
### ranger
unset OSAB myDrA onGH
  . ~/Archbuilds/Bash/export-storage
bash $OSAB/bs-08-as_root-updates.sh
bash ArchBuilds/build-scripts/anytime/cloneArchBuilds.sh
reboot
#### ranger
bash $OSAB/bs-1-to_jo/2-config.sh
sudo bash $OSAB/bs-anytime/symlinks-root.sh
## X
sudo bash $OSAB/bs-anytime/as_root-reflector.sh
sudo bash $OSAB/bs-2-to_X/1-sudo-to_X.sh
bash $OSAB/bs-anytime/timeCorrection.sh
sudo bash $OSAB/bs-2-to_X/1-sudo-autoLoginTTY.sh
bash $OSAB/bs-2-to_X/1-configure_jo.sh
bash $OSAB/bs-2-to_X/1-misc_for_gitconfig.sh
sudo bash $OSAB/bs-anytime/sudo-extra_drives_into_fstab.sh
on sbMb,  bash $OSAB/bs-2-to_X/2-git-remote1.sh
lsblk  indicated  sudo mount /dev/sdb1 /bs
from  /bs/GHssh/  . 2-git-remote2.sh
bash $OSAB/bs-anytime/symlinks-jo-0.sh
bash $OSAB/bs-2-to_X/3-SSH_to_GitHub.sh
bash $OSAB/bs-anytime/as_root-updates.sh
bash $OSAB/bs-2-to_X/4-vimfiles.sh
bash $OSAB/bs-2-to_X/5-trizen-batstat-tmux.sh
bash $OSAB/bs-2-to_X/1-configure_jo.sh
bash $OSAB/bs-anytime/symlinks-jo-0.sh
bash $OSAB/bs-2-to_X/6-prepare_forSoftwares.sh
bash $OSAB/bs-anytime/as_root-updates.sh
bash $OSAB/bs-anytime/Zen.sh
sudo bash $OSAB/bs-3-toWM/1-sudo-prep_forWM.sh
bash $OSAB/bs-anytime/symlinks-jo-0.sh
sudo bash $OSAB/bs-3-toWM/1-sudo-prep_forWM.sh
## lshw
sudo lshw
  terminate called after throwing an instance of 'std::length_error'
    what():  basic_string::_M_create
sudo pacman -Rs lshw
bash 2-grabGraphicsCardDetails.sh
lsblk  reveals  K8GBDTIG3  to be  /dev/sdb1, so
  sudo mount -t exfat -o uid=1000,gid=1000 /dev/sdb1 /bs
## locale.gen.pacnew
bash $OSAB/bs-anytime/cloneArchBuilds.sh
bash $OSAB/bs-anytime/as_root-pacnews.sh
## xrandr
bash $OSAB/bs-3-toWM-0/3-IO_HW.sh
## nnn plugins
bash $OSAB/bs-anytime/cloneArchBuilds.sh
bash $OSAB/bs-3-toWM/4-softwares-for_nnn.sh
## 5-softwares.sh
Installing package nordvpn-bin...
...
chattr: No such file or directory while trying to stat /var/lib/nordvpn/data/*
error: command failed to execute correctly
## awesome
### K8GBDTIG3 load with $GHrUse
mkdir -p /run/media/jo/K8GBDTIG3/GHrUse/linux/wm-awesome
  rsync -iLrtv --delete --modify-window=1 $GHrUse/linux/wm-awesome/streetturtle-awesome-wm-widgets/ /run/media/jo/K8GBDTIG3/GHrUse/linux/wm-awesome/streetturtle-awesome-wm-widgets
mkdir -p /run/media/jo/K8GBDTIG3/GHrUse/CP/rxi-json.lua
  rsync -iLrtv --delete --modify-window=1 $GHrUse/CP/rxi-json.lua/ /run/media/jo/K8GBDTIG3/GHrUse/CP/rxi-json.lua
### K8GBDTIG3 loaded with $GHrUse
lsblk  reveals  K8GBDTIG3  to be  /dev/sda1, so
  sudo mount -t exfat -o uid=1000,gid=1000 /dev/sda1 /bs
6-awesome.sh
jo-1-awesome.sh
startx
### bash $OSAB/bs-4-whenWM/1-softwares.sh
### bash $OSAB/bs-4-whenWM/2-resourceHandler.sh
### Updates
:: Replace at-spi2-atk with extra/at-spi2-core? [Y/n]
:: Replace atk with extra/at-spi2-core? [Y/n]
### bash $OSAB/bs-4-whenWM/3-moreAURs-repeatable.sh
### autorun.sh
chmod u+x $machBld/jo/awesome/autorun.sh  reboot
## Dropbox on SDEP128G
renamed my /mnt/SDEP128G/Dropbox to Dropbo
Signed in > email for security code > Pause Syncing > Preferences > Sync > Move > /mnt/SDEP128G >
  Choose > OK > renamed my Dropbo to Dropbox > Resume Syncing
## logind.conf
HandleLidSwitchExternalPower=ignore
## Updates
## symlinks to Dropbox
bash $OSAB/bs-symlinks/jo-0.sh
bash $OSAB/bs-symlinks/jo-2-whenDropbox.sh
## symlinks for root
bash $OSAB/bs-symlinks/root.sh
## various
hugo
## Updates
  error: failed to commit transaction (conflicting files) python-cairo: /usr/lib/python3.10/site-packages/cairo/__pycache__/__init__.cpython-310.pyc exists in filesystem
pacman -Qo /usr/lib/python3.10/site-packages/cairo/__pycache__/__init__.cpython-310.pyc
  error: No package owns /usr/lib/python3.10/site-packages/cairo/__pycache__/__init__.cpython-310.pyc
sudo mv /usr/lib/python3.10/site-packages/cairo/__pycache__/__init__.cpython-310.pyc /usr/lib/python3.10/site-packages/cairo/__pycache__/__init__.cpython-310.pyc.bak
finished Updates for
  sudo rm /usr/lib/python3.10/site-packages/cairo/__pycache__/__init__.cpython-310.pyc.bak
### Updates
sudo rm /usr/lib/python3.10/site-packages/cairo/__pycache__/__init__.cpython-310.pyc.bak
## Updates
  error: openssl: signature from "Pierre Schmitz <pierre@archlinux.org>" is marginal trust
  :: File /var/cache/pacman/pkg/openssl-3.0.7-4-x86_64.pkg.tar.zst is corrupted (invalid or corrupted package (PGP signature)).
  Do you want to delete it? [Y/n]
  error: failed to commit transaction (invalid or corrupted package)
  Errors occurred, no packages were upgraded.
sudo pacman -Sy archlinux-keyring
## xdg-open .pdf
handlr get .pdf  reports  firefox.desktop
  bash $OSAB/bs-4-whenWM/2-resourceHandler.sh
## xdg-open .docx
handlr get .docx  reports  calibre-ebook-viewer.desktop
  bash $OSAB/bs-4-whenWM/2-resourceHandler.sh
## HP ENVY 5532 IP Address 83.10
hp-setup 192.168.83.10 > Next > Add Printer
hp-toolbox & (= HP Device Manager > HP Envy 5530 Series) > Printer Control > Set as Default
## print to A4 - HP Device Manager
hp-toolbox & > Print Settings > General > Media Size > A4 210x297mm
- didn't get transferred to Zathura's Page Setup > Paper size
## Updates
X randomly restarted
:: Synchronising package databases...
error: failed to synchronize all databases (unable to lock database)
sudo rm /var/lib/pacman/db.lck
## print to A4 - /etc/papersize
echo "a4" | sudo tee -a /etc/papersize
- didn't get transferred to Zathura's Page Setup > Paper size
## Update AUR spotify
  ==> Verifying source file signatures with gpg...
      spotify-1.1.84.716-6-Release ... FAILED (unknown public key 7A3A762FAFD4A51F)
  ==> ERROR: One or more PGP signatures could not be verified!
## random reboot
journalctl -b  has loads of these:
  sd 1:0:0:0: [sda] tag#0 device offline or changed
  AsusW202 kernel: I/O error, dev sda, sector 228263632 op 0x0:(READ) flags 0x3000 phys_seg 1 prio class 2
  AsusW202 kernel: EXT4-fs warning (device sda1): htree_dirblock_to_tree:1072: inode #1089759: lblock 0: comm Linux FS WORKER: error -5 reading directory block
  AsusW202 kernel: sd 1:0:0:0: [sda] tag#0 device offline or changed
journalctl -b -1
  Data from the specified boot (-1) is not available: No such boot ID in journal
## xdg-open .sifw
handlr get .sifw  reports  no mime type
  bash $OSAB/bs-4-whenWM/2-resourceHandler.sh
## xdg-open .ico
handlr get .ico  reports  no handlers found for 'image/vnd.microsoft.icon'
  bash $OSAB/bs-4-whenWM/2-resourceHandler.sh
## Updates
:: Replace pandoc with community/pandoc-cli? [Y/n]
## PNMixer won't unmute
sed -i '/VolMuteKey/ s/=.*/=/' ~/.config/pnmixer/config
## Updates
warning: freetype2 will be installed before its harfbuzz dependency
## switch to the base-devel meta package
sudo pacman -Syu base-devel
## Updates
:: Replace tbb with extra/onetbb? [Y/n]

error: target not found: java-runtime=20
==> ERROR: 'pacman' failed to install missing dependencies.
==> Missing dependencies:
  -> java-runtime=20
==> Checking buildtime dependencies...
==> ERROR: Could not resolve all dependencies.
## HP ENVY 5532 IP Address 151.10
hp-setup 192.168.151.10 > Next > Add Printer
hp-toolbox & (= HP Device Manager > HP Envy 5530 Series) > Printer Control > Set as Default
## HP ENVY 5532 IP Address changed to 151.10
hp-setup -r > Select > Remove
hp-setup 192.168.151.10 > Next > Add Printer
hp-toolbox & (= HP Device Manager > HP Envy 5530 Series) > Printer Control > Set as Default
## import GnuPG key 049956B6
in  Encrypted/Secure1/GnuPG/N130-openSUSE/Private
  gpg --import gpg.asc > passphrase
## edit GnuPG key 049956B6
gpg --edit-key 049956B6 > adduid > Joseph Harriott > trohib@gmail.com > Asus VivoBook W202 > trust > 5 > q
## backup GnuPG key 049956B6
gpg -ao AsusW202-backup-n4e.asc --export-secret-keys --export-options backup trohib
## HP ENVY 5532 IP Address changed to 37.10
hp-setup -r > Select > Remove
hp-setup 192.168.37.10 > Next > Add Printer
hp-toolbox & (= HP Device Manager > HP Envy 5530 Series) > Printer Control > Set as Default
## Updates
  error: failed to prepare transaction (could not satisfy dependencies)
  :: installing jre-openjdk (20.0.1.u9-1) breaks dependency 'java-runtime=19' required by pdfsam
sudo pacman -Rs pdfsam  - just for the updates
## auracle
error: UNKNOWN: Failed sending HTTP request
## tmux
tmux: /usr/lib/libncursesw.so.6: version `NCURSES6_TINFO_6.4.current' not found (required by tmux)
### not helped
sudo pacman -Rs ncurses
sudo pacman -S ncurses
sudo pacman -Rs tmux-bash-completion-git
sudo pacman -Rs tmux
sudo pacman -S tmux
### try ncurses-git
sudo pacman -S bash-completion
#### ncurses-git
:: ncurses-git and ncurses are in conflict. Remove ncurses? [y/N] y
Packages (2) ncurses-6.4-1 [removal]  ncurses-git-6.4.20230527.r0.g1cb99cd1-1
#### reinstall tmux-bash-completion-git
reinstalled  tmux-bash-completion-git
## texmf.cnf
texlive-core 2023.66587-2 -> 2023.66594-3: /usr/share/texmf-dist/web2c/texmf.cnf  corresponds to  /etc/texmf/web2c/texmf.cnf.pacnew, but no longer a symlink...
## Updates
:: python-faust-cchardet and python-cchardet are in conflict. Remove python-cchardet? [y/N] y
system seized during subsequent updates, hard reset
error: failed to synchronize all databases (unable to lock database)
sudo rm /var/lib/pacman/db.lck
## Updates
:: Replace texlive-core with extra/texlive-basic? [Y/n]
:: Replace texlive-science with extra/texlive-mathscience? [Y/n]
## xdg-open .url
handlr get .url  reports  no handlers found for 'application/x-mswinurl'
  bash $OSAB/bs-4-whenWM/2-resourceHandler.sh
## waiting
.oma
cameractrls
guvcview
MIME database
perl-tk
# fcron
fcrontab -l
  @ 1 bash ~/Arch/locks.sh
  @ 20 bash ~/Arch/bash_history.sh
  @ 30 jump clean
# MCEs at start
[Hardware Error]: CPU 0: Machine Check: 0 Bank 4: a600000000020408
[Hardware Error]: TSC 0 ADDR fef622c0
[Hardware Error]: PROCESSOR 0:506c9 TIME 1660462321 SOCKET 0
only the unix timestamp changes
# pass
$ pass ls
  Password Store
  ├── mbsync-cz
  ├── mbsync+msmtp-fm
  ├── mbsync+msmtp-gmx
  ├── mbsync+msmtp-live
  ├── mbsync+msmtp-zou
  ├── mbsync-tj
  └── mbsync-troh
pass init trohib@gmail.com
rsync -irtv --delete ~/.password-store/ $Enc/Secure1/password-store-AsusW202
## mbsync/cz
pass insert mbsync-cz > <app_pw_for_mbsync>
pass ls mbsync-cz
## mbsync/fm
pass insert mbsync+msmtp-fm > <app_pw_for>
pass ls mbsync+msmtp-fm
## mbsync/gmx
pass insert mbsync+msmtp-gmx > <app_pw_for>
pass ls mbsync+msmtp-gmx
## mbsync/live
pass insert mbsync+msmtp-live > <jnbh_pw>
pass ls mbsync+msmtp-live
## mbsync/tj
pass insert mbsync-tj > <app_pw_for_mbsync>
pass ls mbsync-tj
## mbsync/troh
pass insert mbsync-troh > <app_pw_for_mbsync>
pass ls mbsync-troh
## mbsync/zou
pass insert mbsync+msmtp-zou > <pw>
pass ls mbsync+msmtp-zou
# physical configuration
4GB RAM
F2  at  POST  for  ASUS BIOS Utility - EZ Mode
screen is 1366x768
SDEP128G  in  microSD  slot, for  Dropbox
## eMMC
64GB
### TRIM support
lsblk -D  reports DISC-GRAN's of 4M DISC-MAX's of 74M
sudo hdparm -I /dev/mmcblk0  reports nothing
